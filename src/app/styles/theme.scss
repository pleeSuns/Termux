@import '~@angular/material/theming';
@import '../components/canvas/_canvas-theme.scss';
@import '../components/dialogs/_dialog-theme.scss';
@import '../components/layertimeline/_layerlisttree-theme.scss';
@import '../components/layertimeline/_layertimeline-theme.scss';
@import '../components/layertimeline/_timelineanimationrow-theme.scss';
@import '../components/playback/_playback-theme.scss';
@import '../components/propertyinput/_propertyinput-theme.scss';
@import '../components/root/_root-theme.scss';
@import '../components/toolbar/_toolbar-theme.scss';
@include mat-core();

$ss-light-theme-foreground: (
  // base:              black,
  divider:                rgba(black, 0.12),
  // dividers:          $black-12-opacity,
  // disabled:          rgba(black, 0.38),
  // disabled-button:   rgba(black, 0.38),
  disabled-text:          rgba(black, 0.38),
  disabled-text-inverse:  rgba(white, 0.5),
  // hint-text:         rgba(black, 0.38),
  secondary-text:         rgba(black, 0.54),
  secondary-text-inverse: rgba(white, 0.7),
  // icon:              rgba(black, 0.54),
  // icons:             rgba(black, 0.54),
  primary-text:           rgba(black, 0.87),
  primary-text-inverse:   white,
  // slider-off:        rgba(black, 0.26),
  // slider-off-active: rgba(black, 0.38),
);
$ss-dark-theme-foreground: (
  // base:              white,
  divider:                rgba(white, 0.12),
  // dividers:          $white-12-opacity,
  // disabled:          rgba(white, 0.3),
  // disabled-button:   rgba(white, 0.3),
  disabled-text:         rgba(white, 0.5),
  disabled-text-inverse: rgba(black, 0.38),
  // hint-text:         rgba(white, 0.3),
  secondary-text:         rgba(white, 0.7),
  secondary-text-inverse: rgba(black, 0.54),
  // icon:              white,
  // icons:             white,
  primary-text:           white,
  primary-text-inverse:   rgba(black, 0.87),
  // slider-off:        rgba(white, 0.3),
  // slider-off-active: rgba(white, 0.3),
);

$ss-light-theme-background: (
  base: white,
  base50: map-get($mat-grey, 50),
  base100: map-get($mat-grey, 100),
  base200: map-get($mat-grey, 200),
  base300: map-get($mat-grey, 300),
  blue400: map-get($mat-blue, 400),
  blue500: map-get($mat-blue, 500),
  blue600: map-get($mat-blue, 600),
  blue700: map-get($mat-blue, 700),
  base200-inverse: map-get($mat-grey, 900),
  // status-bar: map_get($mat-grey, 300),
  // app-bar:    map_get($mat-grey, 100),
  // background: map_get($mat-grey, 50),
  // hover:      rgba(black, 0.04), // TODO(kara): check style with Material Design UX
  // card:       white,
  // dialog:     white,
  // disabled-button: $black-12-opacity,
  // raised-button: white,
  // focused-button: $black-6-opacity,
  // selected-button: map_get($mat-grey, 300),
  // selected-disabled-button: map_get($mat-grey, 400),
  // disabled-button-toggle: map_get($mat-grey, 200),
);
$ss-dark-theme-background: (
  base: black,
  base50: #303030,
  base100: map_get($mat-grey, 800),
  base200: map_get($mat-grey, 900),
  base300: #101010,
  blue400: map-get($mat-blue, 400), // TODO: update this color
  blue500: map-get($mat-blue, 500), // TODO: update this color
  blue600: map-get($mat-blue, 600), // TODO: update this color
  blue700: map-get($mat-blue, 700), // TODO: update this color
  base200-inverse: map-get($mat-grey, 200),
  // status-bar: black,
  // app-bar:    map_get($mat-grey, 900),
  // background: #303030,
  // hover:      rgba(white, 0.04), // TODO(kara): check style with Material Design UX
  // card:       map_get($mat-grey, 800),
  // dialog:     map_get($mat-grey, 800),
  // disabled-button: $white-12-opacity,
  // raised-button: map-get($mat-grey, 800),
  // focused-button: $white-6-opacity,
  // selected-button: map_get($mat-grey, 900),
  // selected-disabled-button: map_get($mat-grey, 800),
  // disabled-button-toggle: map_get($mat-grey, 1000),
);

@function ss-light-theme($primary, $accent, $warn: mat-palette($mat-red)) {
    $base-theme: mat-light-theme($primary, $accent, $warn);
    $result: map_merge( $base-theme, (
      ss-foreground: $ss-light-theme-foreground,
      ss-background: $ss-light-theme-background,
    ));
    @return $result;
}

@function ss-dark-theme($primary, $accent, $warn: mat-palette($mat-red)) {
    $base-theme: mat-dark-theme($primary, $accent, $warn);
    $result: map_merge( $base-theme, (
      ss-foreground: $ss-dark-theme-foreground,
      ss-background: $ss-dark-theme-background,
    ));
    @return $result;
}

@mixin build-custom-theme($theme) {
    @include angular-material-theme($theme);
    @include ss-canvas-theme($theme);
    @include ss-dialog-theme($theme);
    @include ss-layerlisttree-theme($theme);
    @include ss-layertimeline-theme($theme);
    @include ss-timelineanimationrow-theme($theme);
    @include ss-playback-theme($theme);
    @include ss-propertyinput-theme($theme);
    @include ss-root-theme($theme);
    @include ss-toolbar-theme($theme);
}

$light-primary: mat-palette($mat-blue-grey, 500);
$light-accent: mat-palette($mat-blue, A200, A100, A400);
$light-warn: mat-palette($mat-red);
$dark-primary: mat-palette($mat-purple, 700, 500, 800);
$dark-accent: mat-palette($mat-deep-orange, A200, A100, A400);
$dark-warn: mat-palette($mat-deep-orange);
$light-theme: ss-light-theme($light-primary, $light-accent, $light-warn);
$dark-theme: ss-dark-theme($dark-primary, $dark-accent, $dark-warn);
@include build-custom-theme($light-theme);
.ss-dark-theme {
    @include build-custom-theme($dark-theme);
}

@mixin theme-animation-properties {
    animation-duration: 2000ms;
    animation-timing-function: ease-out;
    animation-fill-mode: forwards;
}

@mixin build-theme-animations($bgKey) {
    $light-background: map-get($light-theme, ss-background);
    $dark-background: map-get($dark-theme, ss-background);
    .dark-to-light-#{$bgKey} {
        animation-name: darkToLight#{$bgKey};
        @include theme-animation-properties;
    }
    .light-to-dark-#{$bgKey} {
        animation-name: lightToDark#{$bgKey};
        @include theme-animation-properties;
    }
    @keyframes lightToDark#{$bgKey} {
        0% { background-color: mat-color($light-background, $bgKey); }
        100% { background-color: mat-color($dark-background, $bgKey); }
    }
    @keyframes darkToLight#{$bgKey} {
        0% { background-color: mat-color($dark-background, $bgKey); }
        100% { background-color: mat-color($light-background, $bgKey); }
    }
}

@include build-theme-animations(base);
@include build-theme-animations(base100);
@include build-theme-animations(base200);
@include build-theme-animations(base300);
