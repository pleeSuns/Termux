<div class="app-container" fxLayout="column">
  <!-- Toolbar. -->
  <div class="toolbar-container">
    <app-toolbar></app-toolbar>
  </div>
  <div class="display-container" fxLayout="column" fxFlex>
    <!-- Start/Preview/End canvases. -->
    <div #canvasContainer class="canvas-container" fxLayout="row"
      (click)="onCanvasContainerClick()" [class.show-pen-cursor]="(appModeObservable | async) !== SELECTION_MODE"
      fxLayoutAlign="center center" fxFlex>
      <app-canvas [canvasType]="START_CANVAS"></app-canvas>
      <app-canvas *ngIf="wasMorphable" [canvasType]="PREVIEW_CANVAS"></app-canvas>
      <app-canvas [canvasType]="END_CANVAS"></app-canvas>
    </div>
    <!-- Timeline controls. -->
    <app-timeline></app-timeline>
  </div>
  <div class="inspector-container" fxLayout="row">
    <app-splitter></app-splitter>
    <!-- SVG importer and/or path selector. -->
    <div fxLayout="column" class="inspector-panel">
      <div class="inspector-panel-header" fxLayout="row" fxLayoutAlign="start center">
        <div fxFlex fxLayoutAlign="end center">
          <span fxFlex>Paths</span>
          <button md-icon-button mdTooltip="Add paths" mdTooltipPosition="above"
            mdTooltipShowDelay="500" [mdMenuTriggerFor]="addPathsMenu">
            <md-icon class="svg-button" svgIcon="addpaths"></md-icon>
          </button>
          <md-menu #addPathsMenu="mdMenu">
            <button md-menu-item (click)="addPathsFromSvg()">
              Add paths from SVG
              <div>
                <input id="addPathsFromSvgButton" type="file" accept=".svg"
                  (change)="onSvgFilesPicked(($event.target || $event.srcElement).files)" multiple>
              </div>
            </button>
            <button md-menu-item (click)="addPathsFromXml()">
              Add paths from Vector Drawable
              <div>
                <input id="addPathsFromXmlButton" type="file" accept=".xml"
                  (change)="onXmlFilesPicked(($event.target || $event.srcElement).files)" multiple>
              </div>
            </button>
          </md-menu>
        </div>
      </div>
      <app-vectorviewer fxFlexFill></app-vectorviewer>
    </div>
    <!-- Path inspector. -->
    <div class="inspector-panel" fxLayout="column" fxFlex>
      <div class="inspector-panel-header" fxLayout="row" fxLayoutAlign="start center">
        <span *ngIf="morphStatus !== MORPH_NONE">
          <span class="status-text" [ngClass]="{
            'unmorphable': morphStatus === MORPH_UNMORPHABLE,
            'morphable': morphStatus === MORPH_MORPHABLE}"
            [innerHTML]="statusTextObservable | async">
          </span>
        </span>
        <span fxFlex></span>
        <button md-icon-button [disabled]="morphStatus === MORPH_NONE"
          mdTooltip="Select points (S)" mdTooltipPosition="above"
          (click)="appModeService.setAppMode(SELECTION_MODE)">
          <md-icon class="svg-button" [class.activated]="(appModeObservable | async) === SELECTION_MODE" svgIcon="selectioncursor"></md-icon>
        </button>
        <button md-icon-button [disabled]="morphStatus === MORPH_NONE"
          mdTooltip="Add points (A)" mdTooltipPosition="above"
          (click)="appModeService.setAppMode(SPLIT_COMMANDS_MODE)">
          <md-icon [class.activated]="(appModeObservable | async) === SPLIT_COMMANDS_MODE">add_circle_outline</md-icon>
        </button>
        <button md-icon-button [disabled]="morphStatus === MORPH_NONE"
          mdTooltip="Split subpaths (C)" mdTooltipPosition="above"
          (click)="appModeService.setAppMode(SPLIT_SUBPATHS_MODE)">
          <md-icon [class.activated]="(appModeObservable | async) === SPLIT_SUBPATHS_MODE">content_cut</md-icon>
        </button>
      </div>
      <app-pathinspector fxFlexFill></app-pathinspector>
    </div>
    <!-- Preview panel. -->
    <div class="inspector-panel" fxLayout="column">
      <div class="inspector-panel-header" fxLayoutAlign="start center">
        <span>Preview</span>
      </div>
      <app-settings fxFlexFill></app-settings>
    </div>
  </div>
</div>
